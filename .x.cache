{"dependencies":{"npm":{"nedb":"latest","dot-object":"0.x.x"}},"nodeDefinitions":{"./graphs/{ns}/{name}.fbp":{"views":{"view":{"id":"3eab693e-b284-46ac-b99b-963f16069753","type":"flow","nodes":[{"id":"cc6b42f6-2315-4e21-ab0b-c82fc24d282c","title":"Log","ns":"console","name":"log","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}"},{"id":"05fd5879-cb15-4518-ab27-cafaedd938c7","title":"ButtonEl","ns":"dom","name":"querySelector","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}"},{"id":"146655aa-13f6-46d1-8629-4e3cca4cadac","title":"ButtonClick","ns":"dom","name":"addMouseEvent","context":{"event":"click"},"provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}"},{"id":"1bfa3381-84c8-4f8b-b0da-59972599d5fa","title":"ClearValue","ns":"dom","name":"setValue","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}"},{"id":"cdd42ad4-929b-40b4-bd15-38364e56d501","title":"GetValue","ns":"dom","name":"getValue","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}"},{"id":"a29d9d46-1216-40a1-bee8-4a1fa944262f","title":"Item","ns":"object","name":"set","context":{"path":"uname"},"provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}"},{"id":"095a48c1-cd48-4f21-a1c8-25ed5fb0b55c","title":"InputEl","ns":"dom","name":"querySelector","context":{"selector":"input[type=text]"},"provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}"}],"links":[{"id":"c382f5ed-cbd3-4b4a-b2c7-e8dc38d5d8fa","source":{"id":"095a48c1-cd48-4f21-a1c8-25ed5fb0b55c","port":"selection"},"target":{"id":"1bfa3381-84c8-4f8b-b0da-59972599d5fa","port":"element","setting":{"persist":true}},"metadata":{"title":"InputEl selection -> element ClearValue"}},{"id":"c2039e37-5a13-48e0-a1b0-8c99e4610f04","source":{"id":"095a48c1-cd48-4f21-a1c8-25ed5fb0b55c","port":"selection"},"target":{"id":"cdd42ad4-929b-40b4-bd15-38364e56d501","port":"element"},"metadata":{"title":"InputEl selection -> element GetValue"}},{"id":"bf144ddd-11b0-4511-ab31-10686858f434","source":{"id":"cdd42ad4-929b-40b4-bd15-38364e56d501","port":"out"},"target":{"id":"a29d9d46-1216-40a1-bee8-4a1fa944262f","port":"in"},"metadata":{"title":"GetValue out -> in Item"}},{"id":"44715e3c-cf46-4bce-85b4-ac168f4bf2ce","source":{"id":"095a48c1-cd48-4f21-a1c8-25ed5fb0b55c","port":"selection"},"target":{"id":"cc6b42f6-2315-4e21-ab0b-c82fc24d282c","port":"msg"},"metadata":{"title":"InputEl selection -> msg Log"}},{"id":"ae80147e-907b-42a5-ba7d-b0042edfdad7","source":{"id":"a29d9d46-1216-40a1-bee8-4a1fa944262f","port":"out"},"target":{"id":"1bfa3381-84c8-4f8b-b0da-59972599d5fa","port":":start"},"metadata":{"title":"Item out -> :start ClearValue"}},{"id":"37ac8427-e1ca-48e5-8ed2-a2d61128a6ca","source":{"id":"05fd5879-cb15-4518-ab27-cafaedd938c7","port":"selection"},"target":{"id":"146655aa-13f6-46d1-8629-4e3cca4cadac","port":"element"},"metadata":{"title":"ButtonEl selection -> element ButtonClick"}},{"id":"d3fd256f-73c9-4f39-a219-0be7a945590e","source":{"id":"146655aa-13f6-46d1-8629-4e3cca4cadac","port":"out"},"target":{"id":"095a48c1-cd48-4f21-a1c8-25ed5fb0b55c","port":":start"},"metadata":{"title":"ButtonClick out -> :start InputEl"}},{"id":"2f62f7a2-a775-4140-99a3-07ad9e15e6a2","source":{"id":"a29d9d46-1216-40a1-bee8-4a1fa944262f","port":"out"},"target":{"id":"cc6b42f6-2315-4e21-ab0b-c82fc24d282c","port":"msg"},"metadata":{"title":"Item out -> msg Log"}},{"id":"308e5147-0894-43a9-aca6-c3f48c8a6299","source":{"id":"cdd42ad4-929b-40b4-bd15-38364e56d501","port":"out"},"target":{"id":"cc6b42f6-2315-4e21-ab0b-c82fc24d282c","port":"msg"},"metadata":{"title":"GetValue out -> msg Log"}},{"id":"30fcb14e-333c-43f4-9cc8-cdb9b524a922","source":{"id":"146655aa-13f6-46d1-8629-4e3cca4cadac","port":"out"},"target":{"id":"cc6b42f6-2315-4e21-ab0b-c82fc24d282c","port":"msg"},"metadata":{"title":"ButtonClick out -> msg Log"}}],"title":"View","ns":"views","name":"view","ports":{"input":{"clear":{"nodeId":"1bfa3381-84c8-4f8b-b0da-59972599d5fa","title":"Clear","name":"in"}},"output":{"out":{"nodeId":"a29d9d46-1216-40a1-bee8-4a1fa944262f","title":"Out","name":"out"}}},"providers":{"@":{"url":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}"}},"provider":"./graphs/{ns}/{name}.fbp"}}},"https://serve-chix.rhcloud.com/nodes/{ns}/{name}":{"nedb":{"datastore":{"_id":"54bb1b39fa15e75e679fd1a4","name":"datastore","ns":"nedb","description":"Nedb Datastore","phrases":{"active":"Creating datastore"},"dependencies":{"npm":{"nedb":"latest"}},"ports":{"input":{"options":{"title":"Options","type":"object","required":false,"properties":{"filename":{"type":"string","description":"path to the file where the data is persisted. If left blank, the datastore is automatically considered in-memory only. It cannot end with a ~ which is used in the temporary files NeDB uses to perform crash-safe writes","required":false},"inMemoryOnly":{"Title":"In Memory only","type":"boolean","description":"In Memory Only","default":false},"onload":{"title":"Onload","type":"function","description":"if you use autoloading, this is the handler called after the loadDatabase. It takes one error argument. If you use autoloading without specifying this handler, and an error happens during load, an error will be thrown.","required":false},"afterSerialization":{"title":"After serialization","type":"function","description":"hook you can use to transform data after it was serialized and before it is written to disk. Can be used for example to encrypt data before writing database to disk. This function takes a string as parameter (one line of an NeDB data file) and outputs the transformed string, which must absolutely not contain a \n character (or data will be lost)","required":false},"beforeDeserialization":{"title":"Before Deserialization","type":"function","description":"reverse of afterSerialization. Make sure to include both and not just one or you risk data loss. For the same reason, make sure both functions are inverses of one another. Some failsafe mechanisms are in place to prevent data loss if you misuse the serialization hooks: NeDB checks that never one is declared without the other, and checks that they are reverse of one another by testing on random strings of various lengths. In addition, if too much data is detected as corrupt, NeDB will refuse to start as it could mean you're not using the deserialization hook corresponding to the serialization hook used before (see below)","required":false},"corruptAlertThreshold":{"type":"number","description":"between 0 and 1, defaults to 10%. NeDB will refuse to start if more than this percentage of the datafile is corrupt. 0 means you don't tolerate any corruption, 1 means you don't care","minValue":0,"maxValue":1,"required":false}}}},"output":{"db":{"title":"Database","type":"Datastore"},"error":{"title":"Error","type":"Error"}}},"fn":"output = function() {\n  var db = new nedb(input.options);\n  db.loadDatabase(function(err) {\n    if (err) {\n      cb({error: err});\n    } else {\n      cb({db: db});\n    }\n  });\n};\n","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}","title":"Database"},"insert":{"_id":"54bb1b39fa15e75e679fd1a5","name":"insert","ns":"nedb","description":"Insert a document into the database","async":true,"phrases":{"active":"Inserting document"},"ports":{"input":{"db":{"title":"Database","type":"Datastore"},"in":{"title":"Document","type":"object","async":true}},"output":{"out":{"title":"New Document","type":"object"},"error":{"title":"Error","type":"Error"}}},"fn":"on.input.in = function() {\n  input.db.insert(data, function(err, newDoc) {\n    if(err) {\n      output({error: err});\n    } else {\n      output({out: newDoc});\n    }\n  });\n};\n","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}","title":"Insert"},"update":{"_id":"54bb2588fa15e75e679fd1a9","name":"update","ns":"nedb","description":"Update documents within the database","phrases":{"active":"Updating document(s)"},"ports":{"input":{"db":{"title":"Database","type":"Datastore"},"query":{"title":"Query","type":"object"},"update":{"title":"Query","description":"specifies how the documents should be modified. It is either a new document or a set of modifiers","type":"object"},"options":{"title":"Options","type":"object","properties":{"multi":{"title":"Multi","description":"allows the modification of several documents if set to true","type":"boolean","default":false},"upsert":{"title":"Upsert","description":"if you want to insert a new document corresponding to the update rules if your query doesn't match anything. If your update is a simple object with no modifiers, it is the inserted document. In the other case, the query is stripped from all operator recursively, and the update is applied to it.","type":"boolean","default":false}}}},"output":{"out":{"title":"New Document","type":"object"},"numReplaced":{"title":"Replaced","type":"number"},"error":{"title":"Error","type":"Error"}}},"fn":"output = function() {\n  input.db.update(input.query, input.update, input.options,\n    function(err, numReplaced, newDoc) {\n    if(err) {\n      output({error: err});\n    } else {\n      output({out: newDoc, numReplaced: numReplaced});\n    }\n  });\n};\n","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}","title":"Update"},"remove":{"_id":"54bb2588fa15e75e679fd1a7","name":"remove","ns":"nedb","description":"Remove documents from database","phrases":{"active":"Removing document(s)"},"ports":{"input":{"db":{"title":"Database","type":"Datastore"},"query":{"title":"Query","type":"object"},"options":{"title":"Options","type":"object","properties":{"multi":{"title":"Multi","description":"allows the removal of multiple documents if set to true","type":"boolean","default":false}}}},"output":{"out":{"title":"New Document","type":"object"},"numRemoved":{"title":"Removed","type":"number"},"error":{"title":"Error","type":"Error"}}},"fn":"output = function() {\n  input.db.remove(input.query, input.options,\n    function(err, numRemoved, newDoc) {\n    if(err) {\n      output({error: err});\n    } else {\n      output({out: newDoc, numRemoved: numRemoved});\n    }\n  });\n};\n","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}","title":"Remove"},"find":{"_id":"54bb1b39fa15e75e679fd1a2","name":"find","ns":"nedb","description":"Find documents within the database","async":true,"phrases":{"active":"Finding document(s)"},"ports":{"input":{"db":{"title":"Database","type":"Datastore"},"in":{"title":"Document","type":"object","async":true}},"output":{"out":{"title":"New Document","type":"object"},"error":{"title":"Error","type":"Error"}}},"fn":"on.input.in = function() {\n  input.db.find(data, function(err, newDoc) {\n    if(err) {\n      output({error: err});\n    } else {\n      output({out: newDoc});\n    }\n  });\n};\n","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}","title":"Find"},"count":{"_id":"54bb1b39fa15e75e679fd1a1","name":"count","ns":"nedb","description":"Count documents within the database","async":true,"phrases":{"active":"Counting document(s)"},"ports":{"input":{"db":{"title":"Database","type":"Datastore"},"in":{"title":"Document","type":"object","async":true}},"output":{"out":{"title":"Count","type":"integer"},"error":{"title":"Error","type":"Error"}}},"fn":"on.input.in = function() {\n  input.db.count(data, function(err, newDoc) {\n    if(err) {\n      output({error: err});\n    } else {\n      output({out: newDoc});\n    }\n  });\n};\n","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}","title":"Count"}},"console":{"log":{"_id":"52645993df5da0102500004e","name":"log","ns":"console","description":"Console log","async":true,"phrases":{"active":"Logging to console"},"ports":{"input":{"msg":{"type":"any","title":"Log message","description":"Logs a message to the console","async":true,"required":true}},"output":{"out":{"type":"any","title":"Log message"}}},"fn":"on.input.msg = function() {\n  console.log(data);\n  output( { out: data });\n}\n","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}","title":"Log"}},"dom":{"querySelector":{"_id":"527299bb30b8af4b8910216b","name":"querySelector","ns":"dom","title":"InputEl","description":"[Document query selector](https://developer.mozilla.org/en-US/docs/Web/API/document.querySelector)","expose":["document"],"phrases":{"active":"Gathering elements matching criteria: {{input.selector}}"},"ports":{"input":{"element":{"title":"Element","type":"HTMLElement","default":null},"selector":{"title":"Selector","type":"string"}},"output":{"element":{"title":"Element","type":"HTMLElement"},"selection":{"title":"Selection","type":"HTMLElement"},"error":{"title":"Error","type":"Error"}}},"fn":"var el = input.element ? input.element : document;\noutput = {\n  element: el\n};\n\nvar selection = el.querySelector(input.selector);\nif(selection) {\n  output.selection = selection;\n} else {\n  output.error = Error('Selector ' + input.selector + ' did not match');\n}\n","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}"},"addMouseEvent":{"_id":"52be4f096a14bb6fbd924a28","name":"addMouseEvent","ns":"dom","description":"Add Mouse Event Listener","async":true,"phrases":{"active":"Adding {{input.event}} handler"},"ports":{"input":{"in":{"title":"Input","type":"any","async":true,"default":null},"element":{"type":"HTMLElement","title":"Dom Element","async":true},"preventDefault":{"type":"boolean","title":"Prevent Default Event","default":true},"event":{"type":"string","enum":["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout","dragstart","drag","dragenter","dragleave","dragover","drop","dragend"],"title":"Dom Event"}},"output":{"element":{"type":"any","title":"Element"},"out":{"type":"any","title":"Output"},"event":{"type":"MouseEvent","title":"Event"}}},"fn":"state.in = undefined;\nstate.event = null;\nstate.preventDefault = null;\n\nstate.clickHandler = function(ev) {\n  if(state.preventDefault) ev.preventDefault();\n  output({\n    out: state.in,\n    event: ev\n  });\n};\n\non.input.in = function() {\n  state.in = data;\n};\n\non.input.element = function() {\n  if (state.in === undefined) return false;\n\n  if(state.el) {\n    state.el.removeEventListener(state.event);\n  }\n  state.el = input.element;\n  state.event = input.event;\n  state.preventDefault = input.preventDefault;\n\n  state.el.addEventListener(input.event, state.clickHandler, false);\n  output({element: input.element});\n};\n","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}","title":"ButtonClick"},"setValue":{"_id":"5681cbffb44e5fb54ab1f652","name":"setValue","ns":"dom","description":"Set value of an input element","phrases":{"active":"Setting value for {input.element.name}"},"ports":{"input":{"in":{"type":"any","title":"Value"},"element":{"type":"HTMLElement","title":"Dom Element","async":true}},"output":{"element":{"type":"HTMLElement","title":"Dom Element"},"out":{"type":"string","title":"Value"}}},"fn":"input.element.value = input.in\noutput.element = input.element\noutput.out = input.in\n","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}","title":"ClearValue"},"getValue":{"_id":"5681cbffb44e5fb54ab1f651","name":"getValue","ns":"dom","async":true,"description":"Take value from an input element","phrases":{"active":"Reading value from {input.element.name}"},"ports":{"input":{"element":{"type":"HTMLElement","title":"Dom Element","async":true}},"output":{"element":{"type":"HTMLElement","title":"Dom Element"},"out":{"type":"string","title":"Value"}}},"fn":"on.input.element = function(data) {\n  output({\n    element: data,\n    out: data.value // never ownProperty...\n  });\n};\n","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}","title":"GetValue"}},"object":{"set":{"_id":"52ef3631cf8e1bab142d5399","name":"set","ns":"object","async":true,"description":"Set a property on an object, or else create a new object and set the property","phrases":{"active":"Setting property {{input.key}}"},"dependencies":{"npm":{"dot-object":"0.x.x"}},"ports":{"input":{"in":{"title":"Value","type":"any","async":true},"path":{"title":"Path","type":"string"},"object":{"title":"Object","type":"object","default":null}},"output":{"out":{"title":"out","type":"object"}}},"fn":"on.input.in = function(data) {\n  var obj = input.object ? input.object : {};\n  dot_object().set(input.path, data, obj);\n  output({out: obj});\n};\n","provider":"https://serve-chix.rhcloud.com/nodes/{ns}/{name}","title":"Item"}}}}}